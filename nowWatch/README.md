# nowWatch - 高精度時計・タイマー・メモツール

## 📖 概要

**ブラウザ標準APIのみ**を用いて実装された高精度な以下の機能を提供するツールです：

- 🕐 **高精度リアルタイム時計**：ミリ秒単位の表示
- ⏱️ **高精度タイマー（ストップウォッチ）**：正確な経過時間計測
- 📝 **永続化メモ機能**：LocalStorageで自動保存
- 📋 **コピー機能**：表示値を簡単にコピー

すべてのツールが**1つのHTMLファイル**で動作し、外部ライブラリやビルド工程を必要としません。

**アクセス**: https://math-u-t.github.io/tools/nowWatch/

---

## ✨ 機能

### 🕐 高精度時計

リアルタイムで現在の時刻をミリ秒精度で表示します。

**表示形式**:
```
HH:MM:SS.mmm
例: 14:23:45.627
```

**特徴**:
- `Date.now()` と `performance.now()` を併用し、表示揺らぎを低減
- ミリ秒まで表示可能
- 表示中の時刻をワンクリックでコピー可能

### ⏱️ 高精度タイマー（ストップウォッチ）

正確な経過時間を計測します。

**機能**:
- **開始**：タイマーをスタート
- **停止**：経過時間を保留
- **リセット**：経過時間をゼロにリセット
- **コピー**：表示値をコピー

**表示形式**: 秒単位（小数第3位まで）
```
例: 3.427秒 → 3.427
例: 105.001秒 → 105.001
```

**計測方法**:
```
経過時間Δt = (Date.now() - t0) + (performance.now() - p0)
```
- 加算型カウンタを使用しない
- 累積誤差が原理的に発生しない

### 📝 メモ機能

自由に文字を書き込めるメモ機能で、LocalStorageに自動保存されます。

**機能**:
- **保存**：メモの内容を保存
- **クリア**：メモを削除
- **コピー**：メモの内容をコピー

**特徴**:
- LocalStorageに保存されるため、ページ再読み込み後も内容は保持
- 自動保存は行わない（操作と状態遷移を一致させるため）

### 📋 コピー操作の可視化

クリップボードへのコピーが成功したことを視覚的に確認できます。

**動作**:
- コピー成功時に以下を同時に行う
  - ボタン表示を「✓ コピー完了」に一時変更
  - 「コピーしました」ステータスを表示
- 表示は約 1.2 秒後に自動復帰
- `navigator.clipboard.writeText` の**成功時Promise解決**のみを成功と判定

---

## 🎯 使用方法

### 時計の使い方

1. ページを読み込むと自動的に現在の時刻が表示されます
2. 時刻をコピーしたい場合は「コピー」ボタンをクリック

### タイマーの使い方

1. 「開始」ボタンをクリックしてタイマーをスタート
2. 「停止」ボタンで一時停止
3. 「リセット」ボタンで経過時間をリセット
4. 経過時間をコピーしたい場合は「コピー」ボタンをクリック

### メモの使い方

1. テキストエリアに自由に文章を入力
2. 「保存」ボタンをクリックして保存
3. ページを再読み込みしても内容は保持される
4. 「クリア」ボタンで内容を削除
5. 「コピー」ボタンでテキストをコピー

---

## 💡 ユースケース

### ⏱️ 時間計測
- **スポーツタイミング**：運動時間やラップタイムの計測
- **勉強時間記録**：学習時間の計測
- **プロジェクト時間**：作業時間の記録
- **料理の時間計測**：調理時間の計測

### 📋 メモ記録
- **作業ノート**：開発中のメモ書き
- **進捗管理**：タスク進捗の記録
- **時刻メモ**：何時に何をしたかの記録
- **アイデア帳**：ひらめいたアイデアの保存

### 🔬 開発・テスト
- **パフォーマンス計測**：機能の実行時間測定
- **インターバルテスト**：定期的な動作確認
- **ストレステスト**：長時間動作の確認

---

## 🌐 技術仕様

| 項目| 内容|
|---|---|
| 使用言語 | HTML / CSS / JavaScript |
| 外部ライブラリ | なし |
| 時刻取得 | `Date.now()` |
| 高分解能計測 | `performance.now()` |
| 描画更新 | `requestAnimationFrame` |
| 永続化 | `localStorage` |

### API詳細

- **Date.now()**：ミリ秒精度のタイムスタンプ取得
- **performance.now()**：高分解能なパフォーマンス計測
- **requestAnimationFrame**：滑らかな画面更新
- **localStorage**：ブラウザ内のデータ永続化
- **navigator.clipboard.writeText**：クリップボード操作

---

## 📱 ブラウザ対応

| ブラウザ | Date.now() | performance.now() | localStorage | clipboard API | 対応状況 |
|---------|---|---|---|---|---------|
| Chrome/Edge | ✅ | ✅ | ✅ | ✅ | ✅ 完全対応 |
| Firefox | ✅ | ✅ | ✅ | ✅ | ✅ 完全対応 |
| Safari | ✅ | ✅ | ✅ | ✅ | ✅ 完全対応 |
| Opera | ✅ | ✅ | ✅ | ✅ | ✅ 完全対応 |

---

## 🔒 セキュリティについて

✅ **安全な処理**:
- すべての処理がローカルで実行される
- データはサーバーに送信されない
- LocalStorageはブラウザ内に保存（同一オリジンのみアクセス可）

⚠️ **注意事項**:
- コピー機能はHTTPS環境または `localhost` での使用を推奨
- LocalStorageのデータはブラウザのキャッシュクリアで削除される可能性あり
- 重要なメモはバックアップを推奨

---

## ⚙️ 設計上の注意

### 計測精度について

- **計測精度 ≠ 表示更新頻度**
  - 表示は約60Hz（16.7ms）程度で更新
  - 計測値は連続実数として内部で保持
- ミリ秒以下の精度は**表示されないが内部では保持**
- 実際の精度はOS・ブラウザ実装に依存

### 動作環境での動作

- バックグラウンドタブでは描画頻度が低下することがある
- 高負荷状態では若干の誤差が生じる可能性
- スリープやサスペンドで一時的に停止

---

## 📝 変更履歴

### v1.0.0 (2026-01-07)
- 初版リリース
- 高精度時計機能実装
- ストップウォッチ（タイマー）機能実装
- メモ機能実装
- コピー機能実装

---

## 🤝 サポート

問題が発生した場合は、[GitHub Issues](https://github.com/math-u-t/tools/issues)で報告してください。

---

## 📄 ライセンス

MIT License
