# webQR - QRコード読み取りツール

## 📖 概要

**3つの方法でQRコードを読み取れる**高機能ツールです。カメラ、画像ファイル、画面キャプチャから直接QRコードを読み取り、結果を表示・共有できます。

jsQRライブラリを使用した正確で高速なQRコード認識が特徴です。

**アクセス**: https://math-u-t.github.io/tools/webQR/

---

## ✨ 機能

### 📷 カメラで読み取り

ブラウザのカメラを使ってリアルタイムでQRコードを読み取ります。

**特徴**:
- **リアルタイム読み取り**: 自動で継続的にスキャン
- **フォーカスガイド**: 画面中央に読み取り枠を表示
- **自動停止**: QRコード読み取り後に自動停止
- **高速認識**: jsQRで最適化された読み取り

### 📁 ファイルアップロード

保存されている画像ファイルからQRコードを読み取ります。

**アップロード方法**:
- **ボタンクリック**: 「ファイルを選択」でファイルダイアログを開く
- **ドラッグ&ドロップ**: ファイルをエリアにドラッグして読み取り
- **プレビュー表示**: アップロード画像をプレビュー表示

### 🖥️ 画面キャプチャ

表示されている画面からQRコードを読み取ります。

**用途**:
- **スクリーン表示のQR**: モニタやスマートフォン画面に表示されたQRを読み取り
- **スクリーンショット**: 自動でキャプチャして読み取り

### 📊 結果表示

読み取ったQRコードの内容を詳細表示します。

**表示情報**:
- **データ内容**: 読み取ったテキストまたはURL
- **タイプ判定**: URLまたはテキストを自動判定
- **読み取り時刻**: 読み取った日時を記録

### 📜 読み取り履歴

すべての読み取り履歴を自動保存・管理します。

**機能**:
- **自動保存**: 最大50件まで自動保存
- **クイック操作**: 履歴から素早く再読み込み・コピー・開く
- **データ永続化**: LocalStorageで端末に保存
- **一括削除**: 全履歴をクリア可能

---

## 🎯 使用方法

### 📷 カメラで読み取り

1. 「📷 カメラで読み取り」タブをクリック
2. 「🎬 カメラ起動」ボタンをクリック
3. ブラウザの許可ダイアログで「許可」を選択
4. QRコードをフレーム内に移動させる
5. 自動的に読み取られて結果が表示される

**コツ**:
- フレーム内にQRコードを中央配置
- 照明が十分にある環境で使用
- カメラがクリアに見える距離を保つ

### 📁 ファイルアップロード

1. 「📁 ファイルアップロード」タブをクリック
2. 「📂 ファイルを選択」をクリック、またはファイルをドラッグ
3. QRコードが含まれている画像を選択
4. プレビューが表示され、自動的に読み取り開始
5. 結果が表示される

**対応形式**: PNG、JPEG、GIF、WebP など

### 🖥️ 画面キャプチャ

1. 「🖥️ 画面キャプチャ」タブをクリック
2. 「📸 画面キャプチャ」ボタンをクリック
3. キャプチャ対象ウィンドウ/タブを選択
4. キャプチャが実行され、QRコードを読み取り
5. 結果が表示される

**使用場面**:
- 複数モニター画面の読み取り
- スマートフォン画面に表示されたQRの読み取り

### 📊 結果の操作

読み取り結果に対して以下の操作が可能です：

| 操作 | 説明 |
|-----|------|
| 📋 コピー | 読み取った内容をクリップボードにコピー |
| 🔗 リンク開く | URL結果の場合、ブラウザで開く（テキストの場合は非表示） |
| 🗑️ クリア | 結果をクリア |

### 📜 履歴の管理

読み取り履歴の各項目では以下の操作ができます：

| 操作 | 説明 |
|-----|------|
| 読み込み | その項目の結果を再度表示 |
| コピー | 内容をクリップボードにコピー |
| 開く | URLの場合、ブラウザで開く |
| 削除 | 履歴から削除 |

**全体操作**:
- 「📝 履歴をクリア」で全履歴を削除

---

## 🔒 セキュリティとプライバシー

✅ **プライベート処理**:
- すべての処理がブラウザ内で実行
- カメラ映像やアップロード画像はサーバーに送信されない
- データはLocalStorageで端末内保存のみ

✅ **カメラアクセス**:
- 最初のアクセス時のみ許可ダイアログが表示
- いつでもブラウザ設定で取り消し可能
- HTTPSまたはlocalhostで動作

✅ **ファイルアップロード**:
- ファイルはブラウザメモリで処理
- サーバーアップロードなし

⚠️ **注意**:
- ブラウザキャッシュクリアでLocalStorageが削除される可能性
- 重要な読み取りデータはスクリーンショットで別途保存推奨
- 他人に見られてはいけないQRコードはプライベートモードで処理

---

## 📱 ブラウザ対応

| ブラウザ | getUserMedia | Canvas | LocalStorage | 対応状況 |
|---------|---|---|---|---------|
| Chrome/Edge | ✅ | ✅ | ✅ | ✅ 完全対応 |
| Firefox | ✅ | ✅ | ✅ | ✅ 完全対応 |
| Safari | ✅ | ✅ | ✅ | ✅ 完全対応 |
| Opera | ✅ | ✅ | ✅ | ✅ 完全対応 |

**必須環境**: HTTPS環境またはlocalhost

---

## 💡 ユースケース

### 📲 QRコード読み取り
- **スマートフォン併用**: スマートフォンに表示されたQRをPCから読み取り
- **チラシ・ポスター**: 紙に印刷されたQRコードを読み取り
- **デジタル看板**: モニタに表示されたQRを読み取り

### 💼 業務用途
- **URLリスト化**: 複数のQRコードをまとめて読み取り
- **在庫管理**: QRコード付き製品の管理
- **来訪者追跡**: イベント参加者のQRコード処理

### 🎓 教育・研究
- **実験データ**: QRコード形式のデータ読み込み
- **学習教材**: 動的QRコード活用

### 🏪 小売・飲食
- **決済**: QR決済コードの読み取り
- **メニュー**: QRメニューボード
- **会員管理**: 会員カード内のQRコード

---

## 🌐 技術仕様

### 使用API・ライブラリ

| API/ライブラリ | 説明 |
|-------|------|
| jsQR | QRコード読み取り・デコード |
| getUserMedia API | カメラアクセス |
| Canvas API | 画像処理・フレーム キャプチャ |
| html2canvas | スクリーンキャプチャ |
| localStorage | 履歴保存 |

### QRコード対応フォーマット

- **QR Code Model 1**: 基本形式
- **QR Code Model 2**: 現在の標準規格
- **最大データ容量**: 約4,296文字（英数字）
- **認識精度**: 90°回転、部分隠蔽に対応

### パフォーマンス

| 項目 | 仕様 |
|------|------|
| 読み取り速度 | <100ms（通常） |
| カメラフレーム | 60FPS (requestAnimationFrame) |
| 履歴保存 | 最大50件 |
| ローカルストレージ | 5～10MB（ブラウザ依存） |

---

## ⚙️ 設定・カスタマイズ

### カメラの選択

複数カメラがある場合、ブラウザのシステム設定で選択できます：
- Windows: 設定 > プライバシーとセキュリティ > カメラ
- Mac: システム設定 > プライバシーとセキュリティ > カメラ

### 読み取り精度の向上

**QRコードが認識されない場合**:
- 照明を調整（キラキラ反射を避ける）
- QRコードを傾けない
- カメラレンズをきれいにする
- QRコードのコントラストを確認

---

## 📝 変更履歴

### v1.0.0 (2026-01-07)
- 初版リリース
- カメラ読み取り機能
- ファイルアップロード機能
- スクリーンキャプチャ機能
- 履歴管理機能

---

## ❓ よくある質問（FAQ）

**Q: iPhoneのカメラで読み取れますか？**
A: 対応ブラウザ（Chrome、Safari等）を使用すれば可能です。ただし、iPhoneはSafariの使用をお勧めします。

**Q: QRコードが読み取れません**
A: 以下を確認してください：
1. 照明が十分か
2. QRコードが完全に表示されているか
3. ブラウザのカメラアクセス許可を確認
4. QRコードの形式が標準QRコードか

**Q: 読み取り結果をコンピュータに保存できますか？**
A: 履歴に自動保存されます。またはコピーボタンでテキストエディタに貼り付けて保存できます。

**Q: QRコード認識の精度は？**
A: jsQRライブラリは90%以上の認識精度を誇ります。低コントラスト、破損したQRコードは認識できない場合があります。

**Q: 複数のQRコードを同時に読み取れますか？**
A: 現在のバージョンでは1つずつの読み取りです。

**Q: フロントカメラで読み取れますか？**
A: はい、ブラウザのカメラ設定でフロントカメラに変更可能です。

---

## 🤝 サポート

問題が発生した場合は、[GitHub Issues](https://github.com/math-u-t/tools/issues)で報告してください。

---

## 📄 ライセンス

MIT License
